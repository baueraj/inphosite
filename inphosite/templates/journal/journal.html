<%inherit file="/base-tree.html"/>
<%namespace name="entity" file="/entity/entity.html" />

<%def name="label()">
%if c.entity.abbrs:
${c.entity.abbrs[0]}
%else:
${c.entity.label}
%endif
</%def>

<%def name="title()">Journal - ${label()}</%def>
<%def name="head_title()">${label()}</%def>
<%def name="sidebar()">
${parent.sidebar()}
<br />
${parent.draw()}</%def>

<div class="yui-gd">
<script src="/js/admin.js" type="text/javascript"></script>
<script type="text/javascript">
function srch(id) {
    var src  = '/entity/' + id + '/search';
    $.get(src, function(data){
          $("#moreInfo").html(data);
        });
}
$(document).ready(srch(${c.entity.ID}));
</script>

<div id="content">
<h1>${c.entity.label}</h1>
</div>

<div id="contentLeft">

## If user is authorised, show admin panel
%if h.auth.is_admin():
  ${entity.printAdminPanel(["id", "type", "label", "sep_dir", "URL", "last_accessed", "language", "openAccess", "active", "student", "ISSN"])}
%else:
  <dl>
    %if c.entity.URL:
    <dt><a href="${c.entity.URL}">Web Site</a></dt>
    <br />
    %endif

    %if c.entity.language:
    <dt>Language:</dt>
    <dd>${c.entity.language}</dd>
	<br />
    %endif

    %if c.entity.ISSN:
    <dt>ISSN:</dt>
    <dd>${c.entity.ISSN}</dd>
	<br />
    %endif
    
    %if c.entity.abbrs:
    <dt>Abbreviations:</dt>
    %for abbr in c.entity.abbrs:
    <dd>${abbr}</dd>
    %endfor
	<br />
    %endif
    
    %if c.entity.openAccess or c.entity.student or not c.entity.active:
    <dt>Extra:</dt>
    %if c.entity.openAccess:
    <dd>Open Access</dd>
    %endif
    %if c.entity.student:
    <dd>Student Journal</dd>
    %endif
    %if not c.entity.active:
    <dd>Inactive</dd>
    %endif
    %endif
  </dl>
%endif

</div> <!-- contentLeft -->

<div id="moreInfo">
    <p>Loading search results ...</p><p><img src='/img/loading.gif' /></p>
</div>
</div> <!-- wrapper -->
