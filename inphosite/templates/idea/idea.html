<%! import urllib %>
<%inherit file="/base-tree.html" />
<%namespace name="entity" file="/entity/entity.html" />
<% 
#Intialize variables for evaluation interface
c.entID = 0 
%>

## Header
<%def name="title()">${parent.title()} - Idea - ${h.titlecase(c.idea.label)}</%def>
<%def name="head_title()">${h.titlecase(c.idea.label)}</%def>
## Sidebar
<%def name="sidebar()">
${parent.sidebar()}
<br />
${parent.draw(c.node)}</%def>

## Body
<div class="yui-gd">
<script src="/js/eval.js" type="text/javascript"></script>


<script type="text/javascript">
$(document).ready(function() {
    evalsEnabled = ${'true' if request.environ.get('REMOTE_USER') else 'false'};
    $("#dialog").dialog({position: [490,380], modal : true, title : 'Multiple Results'});
});
</script>

<div id="content">
<h1>${h.titlecase(c.idea.label)}</h1>
%if c.idea.sep_dir:
<p><a href="http://plato.stanford.edu/entries/${c.idea.sep_dir}/"
 target="_blank">
<img src="/img/sepmanicon.png" /> ${h.titlecase(c.idea.label)}</a>
is also an article in the Stanford Encyclopedia of Philosophy.</p>
%endif


%if c.idea.nodes:
<div id="dialog">
<p>${h.titlecase(c.idea.label)} is \
classified in \
%if len(c.idea.nodes) > 1:
<em>multiple places</em> in \
%endif
the taxonomy. You may either go to the following context-specific taxonomy pages
or <a href="#" onClick="$('#dialog').dialog('close')">stay
on this general concept page</a>.</p>
<ul>


## Nodes
%for node in c.idea.nodes:
<li>\
<% curParent = node.parent 
parents = []
while curParent:
    parents.insert(0, curParent)
    curParent = curParent.parent
%>
%for parent in parents:
<a class="idea" href="${parent.url()}">${parent.label}</a> -&gt; \
%endfor
<a class="idea" href="${node.url()}">${node.label}</a> \
</li>
%endfor

<li><a href="#" onClick="$('#dialog').dialog('close')">Stay on the current page</a></li>
</ul>

</div>
%endif

<%doc>
</%doc>




<%doc>
%if not c.idea.nodes and not c.idea.instance_of:
<p>${c.idea.label} is not <em>yet</em> classified in the taxonomy.

%if not request.environ.get('REMOTE_USER'):
Help improve results by <strong><a href="#" onClick="enableEvals()">enabling idea evaluations</a></strong>!
%else:
Help improve results by submitting idea evaluations!
%endif
</p>
%endif
</%doc>


</div> <!-- content -->



<div id="contentLeft">
%if not request.environ.get('REMOTE_USER') and (c.idea.nodes or c.idea.instance_of):
<p class="evaltext">Help improve results by <strong><a href="#"
onClick="enableEvals($(this).parent().parent())">enabling anonymous 
idea evaluations</a></strong> or <strong><a href="${h.url('signin',
came_from=h.url(controller='idea', action='view', id=c.idea.ID))}">signing
in</a></strong>! </p>
%endif

<div id="taxonomy">
%if not c.idea.nodes and not c.idea.instance_of:
<h3 class="empty">Taxonomic Relations</h3>
<p class="bottom">${c.idea.label} is not <em>yet</em> classified in the taxonomy. Please submit <a
href="${h.url(controller='idea', action='edit',
id=c.idea.ID)}">evaluations</a> to help improve the InPhO.</p>
%else:
<h3>Taxonomic Relations
<span class="toggle on" onclick="toggleList('#taxonomy')">&nbsp;</span>
</h3>
<ol>
%for node in c.idea.nodes:
<div>
%if node.parent:
${entity.printEntity(node.parent, group=True)}
${entity.printEntity(node, cls="child", group=True, srch_id=node.parent.ID)}
%else:
${entity.printEntity(node, group=True, srch_id=node.ID)}
%endif
</div>
%endfor

%for i, node in enumerate(c.idea.instance_of):
<div>
${entity.printEntity(node, group=True)}
${entity.printEntity(c.idea, cls="child", group=True, srch_id=node.ID)}
</div>
%endfor
</ol>

%endif
</div>

<div id="links">
%if not c.idea.links_to:
<h3 class="empty">Non-taxonomic Links</h3>
<p class="bottom">${c.idea.label} does not <em>yet</em> have non-taxonomic links. Please submit <a
href="${h.url(controller='idea', action='edit',
id=c.idea.ID)}">evaluations</a> to help improve the InPhO.</p>
%else:
<h3>Non-taxonomic Links
<span class="toggle on" onclick="toggleList('#links')">&nbsp;</span>
</h3>
<ol>
%for i,node in enumerate(c.idea.links_to):
<div>
${entity.printEntity(node, group=True)}
${entity.printEntity(c.idea, cls="childLink", group=True, srch_id=node.ID)}
</div>
%endfor
</ol>

%endif
</div>

<div id="related">
%if not c.idea.related.first():
<h3 class="empty">Related Terms</h3>
%else:
<h3>Related Terms 
<span class="toggle on" onclick="toggleList('#related')">&nbsp;</span>
</h3>
<p class="bottom">Generated by <i>statistical measures</i></p>
<ol>
%for idea in c.idea.related[0:9]:
${entity.printEntity(idea)}
%endfor
</ol>
%endif
</div> <!-- related -->

<div id="relatedThinkers">
%if not c.idea.related.first():
<h3 class="empty">Related Thinkers</h3>
%else:
<h3>Related Thinkers
<span class="toggle on" onclick="toggleList('#relatedThinkers')">&nbsp;</span>
</h3>
<p class="bottom">Generated by <i>statistical measures</i></p>
<ol>
%for thinker in c.idea.related_thinkers[0:9]:
${entity.printEntity(thinker)}
%endfor
</ol>
%endif
</div> <!-- related -->


<div id="hyponyms">
%if not c.idea.hyponyms.first():
<h3 class="empty">Hyponyms</h3>
%else:
<h3>Hyponyms
<span class="toggle on" onclick="toggleList('#hyponyms')">&nbsp;</span>
</h3>
<p class="bottom">Generated by <i>statistical measures</i></p>
<ol>
%for idea in c.idea.hyponyms[0:9]:
${entity.printEntity(idea)}
%endfor
</ol>
%endif
</div> <!-- hyponyms -->

<div id="occurrences">
%if not c.idea.occurrences.first():
<h3 class="empty">Occurrences</h3>
%else:
<h3>Occurrences
<span class="toggle on" onclick="toggleList('#occurrences')">&nbsp;</span>
</h3>
<p class="bottom">Generated by <i>statistical measures</i></p>
<ol>
%for idea in c.idea.occurrences[0:9]:
${entity.printEntity(idea)}
%endfor
</ol>
%endif
</div> <!-- occurrences -->
</div> <!-- contentLeft -->

<div id="moreInfo">
<p>This is the page for the idea <em>${c.idea.label}</em>.</p>

<p>Click on any of the links on the left to explore related terms through a
variety of targeted searches.  Click the <img src="/img/sepmanicon.png" /> icon
to open the SEP article on the adjacent term. Click the <img src="/img/inpho.png" /> icon
to open the InPhO page for the adjacent term.</p> 
</div> <!-- moreInfo-->
</div> <!-- wrapper-->
