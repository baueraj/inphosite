<%inherit file="/base.html" />
<%namespace file="/actb.html" name="actb" />
<%! 
import operator
import inphosite.lib.helpers as h

def nodeRecursion(i, nodes, root, selected):
    n=""
    for node in nodes:
        # configure next node, select currentnode
        n += "var tmpNode%s = new YAHOO.widget.TextNode({label : '%s', href: '%s', selected: %s, highlightState:%s, className: %s}, %s);\n" % (i, node.name, h.url(controller="taxonomy", action="view", id=node.ID), str(selected==node.ID).lower(), 1 if selected==node.ID else 0, '"yuitree-hl"' if selected==node.ID else 'null', str(root))
        if node.children:
            sorted_children = node.children
            sorted_children.sort(key=operator.attrgetter('name'))
            n += nodeRecursion(i+1, sorted_children, "tmpNode"+str(i), selected)
    return n
%>

<%def name="sidebar(node=None)">
<a href="/"><img src="/img/newlogo.png" width="185" style="margin-top: -11px; margin-bottom:10px;"></a>
${draw(getattr(c, "node", None))}
</%def>

<%def name="draw(node=None)">
<div id="chart"></div>
<script type="text/javascript" src="/js/tree-vertical.js"></script>
</%def>

<%def name="head_title()">
${next.head_title()}
</%def>

${next.body()}
